#修改前缀按键
unbind C-b
set -g prefix M-a

#设置窗口序号从1开始
set -g base-index 1
setw -g pane-base-index 1

#设置按键绑定为vi模式
# setw -g mode-keys vi

# 禁止重命名
set-option -g allow-rename off

#优化nvim
set -sg escape-time 10
# set-option -ga terminal-overrides ",xterm-256color:Tc"
set-option -ga terminal-overrides ',xterm-kitty:cnorm=\E[?12h\E[?25h'
set -g default-terminal "xterm-256color"

#设置状态栏
set-window-option -g window-status-format "#[fg=colour0, bg=colour4]#I###W #[fg=colour0]"
set-window-option -g window-status-current-format "#[fg=colour7, bg=colour4]#I###W #[fg=colour0]"
set -g status-left ""
set -g status-right " #(~/.myconf/tmuxstatusline.sh)"#
set -g status-right-length 40
set -g status-bg colour4
set -g status-fg colour0
set -g status-interval 2

set -g renumber-windows

#切换上一个窗口
bind M-a last-window

#分割面板
unbind '"'
bind - splitw -v #水平分割
unbind '%'
bind | splitw -h #垂直分割

#切换面板
unbind l
bind j select-pane -D
bind k select-pane -U
bind h select-pane -L
bind l select-pane -R

#调整面板大小
bind M-j resizep -D 2
bind M-k resizep -U 2
bind M-h resizep -L 2
bind M-l resizep -R 2

#交换面板
bind M-u swapp -U
bind M-d swapp -D

# fix key map
bind-key -n 'M-h' 'send-keys M-h'
bind-key -n 'M-j' 'send-keys M-j'
bind-key -n 'M-k' 'send-keys M-k'
bind-key -n 'M-l' 'send-keys M-l'

#鼠标设置
set -g mouse on

#命令行
bind : command-prompt

#重新载入配置文件
bind r source ~/.tmux.conf \; display "配置已重新载入"

# 插件
set -g @plugin 'tmux-plugins/tpm' #插件管理 <prefix>+I:安装插件 <prefix>+U:更新插件 <prefix>+alt+u:卸载插件
set -g @plugin 'tmux-plugins/tmux-sensible' #tmux默认配置
set -g @plugin 'wfxr/tmux-fzf-url' #<prefix>+u: 列出所有URL，按下回车就会在默认浏览器打开
set -g @plugin 'laktak/extrakto' #<prefix>+tab: 补全
set -g @plugin 'sunaku/tmux-navigate' # tmux快捷切换窗口

# if you're using QWERTY layout
set -g @navigate-left  '-n M-h'
set -g @navigate-down  '-n M-j'
set -g @navigate-up    '-n M-k'
set -g @navigate-right '-n M-l'
set -g @navigate-back  '-n M-\'

#tmp tmux插件管理 安装插件: [<prefix>+I]
if "test ! -d ~/.tmux/plugins/tpm" \
   "run 'git clone https://github.com/tmux-plugins/tpm ~/.tmux/plugins/tpm && ~/.tmux/plugins/tpm/bin/install_plugins'"
run '~/.tmux/plugins/tpm/tpm'
